import{h}from"hyperapp";import uuid from"uuid/v4";var renderers=[],container=null,injectScript=function(e){window.GoogleRecaptchaLoaded=function(){for(;renderers.length;){renderers.pop()()}};var t=document.createElement("script");t.id="recaptcha",t.src="https://www.google.com/recaptcha/api.js?hl="+e+"&onload=GoogleRecaptchaLoaded&render=explicit",t.type="text/javascript",t.async=!0,t.defer=!0,t.onerror=function(e){throw e},document.body.appendChild(t)},createRecaptcha=function(e){var t=e.sitekey,n=e.locale,c=void 0===n?"en":n,r=e.badge,o=void 0===r?"bottomright":r,a=e.onResolved,i=e.onLoaded,d=void 0===i?function(){}:i,p=e.onInstanceCreated,u="GoogleRecaptchaResolved-"+uuid();window[u]=a;var s=function(){if(container){var e=window.grecaptcha.render(container,{sitekey:t,size:"invisible",badge:o,callback:u});p({execute:function(){return window.grecaptcha.execute(e)},reset:function(){return window.grecaptcha.reset(e)},getResponse:function(){return window.grecaptcha.getResponse(e)}}),d()}};window.grecaptcha?s():(renderers.push(s),document.querySelector("#recaptcha")||injectScript(c))},InvisibleRecaptcha=function(e){return h("div",{oncreate:function(t){container=t,createRecaptcha(e)}},[])};export default InvisibleRecaptcha;
