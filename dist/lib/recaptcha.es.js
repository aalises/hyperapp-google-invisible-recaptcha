import{h}from"hyperapp";import uuid from"uuid/v4";var renderers=[],container=null,injectScript=function(e){window.GoogleRecaptchaLoaded=function(){for(;renderers.length;){renderers.pop()()}};var t=document.createElement("script");t.id="recaptcha",t.src="https://www.google.com/recaptcha/api.js?hl="+e+"&onload=GoogleRecaptchaLoaded&render=explicit",t.type="text/javascript",t.async=!0,t.defer=!0,t.onerror=function(e){throw e},document.body.appendChild(t)},createRecaptcha=function(e,t){var n=e.sitekey,c=e.locale,r=e.badge,a=e.onResolved,o=e.onLoaded,i=e.onInstanceCreated;c||(c="en"),r||(r="bottomright"),o||(o=function(){});var d="GoogleRecaptchaResolved-"+uuid();window[d]=a;var p=function(){if(container){var e=window.grecaptcha.render(container,{sitekey:n,size:"invisible",badge:r,callback:d});i({execute:function(){return window.grecaptcha.execute(e)},reset:function(){return window.grecaptcha.reset(e)},getResponse:function(){return window.grecaptcha.getResponse(e)}}),o()}};window.grecaptcha?p():(renderers.push(p),document.querySelector("#recaptcha")||injectScript(c))},InvisibleRecaptcha=function(e){return h("div",{oncreate:function(t){container=t,createRecaptcha(e,t)}},[])};export default InvisibleRecaptcha;
